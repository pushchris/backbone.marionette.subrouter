(function(a){"function"==typeof define&&define.amd?define(["underscore","backbone","marionette"],a):a(_,Backbone,Marionette)})(function(a,b){return Marionette.SubRouter=Marionette.AppRouter.extend({constructor:function(c,d){var e={};this.prefix=c=c||"",this.separator="/"===c.slice(-1)?"":"/";var f=d&&d.createTrailingSlashRoutes;this.appRoutes&&(d&&d.controller&&(this.controller=d.controller),a.each(this.appRoutes,function(a,b){b?("/"===b.substr(0)&&(b=b.substr(1,b.length)),e[c+this.separator+b]=a,f&&(e[c+this.separator+b+"/"]=a)):(e[c]=a,f&&(e[c+"/"]=a))},this),this.appRoutes=e),Marionette.AppRouter.prototype.constructor.call(this,d);var g;g=b.history.fragment?b.history.getFragment():b.history.getHash(),a.every(this.appRoutes,function(a,c){return g.match(b.Router.prototype._routeToRegExp(c))?(b.history.loadUrl(g),!1):!0},this)}}),Marionette.SubRouter});